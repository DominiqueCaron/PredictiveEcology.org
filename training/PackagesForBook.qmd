---
author:
  - "Eliot McIntire"
date: last-modified
editor_options:
  chunk_output_type: console
---

# Pre-installing R packages for book

The objective of this book is to facilitate lightweight project code and
setting up R^3^T workflows[^1]. To do this, packages and any code that
are used must be easy to install and use. We accomplish this by having
each chapter installing its own packages, and avoiding having users
"pre-installing" packages.

Furthermore, packages, once installed for one project, will be cached
locally so that the next project will be able to install quickly from
the local package cache. We have also attempted to allow all sections to
be run without administrator privileges.

Nonetheless, there might be situations where users of this book will
need to pre-install packages in one go â€“ e.g., they will run chapter
code without internet access. The following instructions are meant to
cover this use case.

## Installation code

If you can run the following code, then you will be able to run code in
any of the chapters in this book. This code installs a few packages
(notably `SpaDES.project`, `Require` and their dependencies), then it
downloads and installs a single SpaDES module (*Biomass-core*). This
module happens to have many package dependencies (over 130 packages)
covering all the dependencies needed in this book. It also downloads an
extra package `diskframe` that is not a dependency of *Biomass_core*,
but brings with it many other packages.

```{r setupProject}
#| cache: true
#| echo: true
#| eval: false

repos <- c("predictiveecology.r-universe.dev", getOption("repos"))
install.packages(c("SpaDES.project", "reproducible"),
                 repos = repos, dependencies = TRUE)

library(SpaDES.project)
out <- setupProject(
  pkgList = {
    pkgList <- reproducible::prepInputs(
      url = "https://raw.githubusercontent.com/PredictiveEcology/PredictiveEcology.org/14-fix-webpage-build/training/R/pkgList.csv",
      fun = "read.csv")
    pkgList[[2]]
    },
  options = list(repos = repos),
  paths = list(packagePath = .libPaths()[1])
  name = "Introduction",
  modules = "PredictiveEcology/Biomass_core@main",
  packages = pkgList
)

```

## See also

@sec-TroubleShoot on R package installation troubleshooting

[^1]: See this [introduction to R^3^T
    workflows](https://ceresbarros.github.io/reproducible-workflowsWS/presentations/20230712_BESMacroSIG2023_ReproducibleWorkflowsWS.pdf).
